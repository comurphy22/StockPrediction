======================================================================
MVP VALIDATION - XGBOOST MODEL TESTING
======================================================================
Started: 2025-11-03 15:20:07

[1/4] Loading optimal feature set...
âœ… Loaded 25 optimal features
   Top 5 features: ['avg_sentiment_compound', 'HL_spread', 'Price_change', 'SMA_50', 'Volume_change']

[2/4] Test stocks selected:
   High coverage: NFLX, NVDA, BABA, QCOM, MU
   Major tech:    TSLA, AAPL, MSFT, GOOGL, AMZN
   Total: 10 stocks

[3/4] Testing stocks...
======================================================================

[1/10] Testing NFLX
----------------------------------------------------------------------
   [1/7] Fetching stock data for 2019... Successfully fetched 251 days of data for NFLX
âœ… 251 trading days
   [2/7] Loading news sentiment... ğŸ“‚ Loading 3 dataset file(s) and combining...
   Loading: analyst_ratings_processed.csv... 1,400,469 rows
   Loading: raw_analyst_ratings.csv... 1,407,328 rows
   Loading: raw_partner_headlines.csv... 1,845,559 rows
âœ… Combined 3 datasets: 4,653,356 total rows
ğŸ“‹ Columns: ['Unnamed: 0', 'title', 'date', 'stock', 'headline', 'url', 'publisher']
âœ… Combined 'headline' and 'title' columns â†’ 'unified_headline'
âœ… Using columns: ticker='stock', date='date', headline='unified_headline' from 4,653,356 total rows
ğŸ¯ Found 6037 news items for NFLX
ğŸ“… After date filter: 798 items from 2019-01-01 to 2019-12-31
ğŸ¤– Calculating VADER sentiment scores...
âœ… Successfully processed 798 unique news items
ğŸ“Š Date range: 2019-01-01 17:38:00 to 2019-12-30 21:13:00
ğŸ’­ Average sentiment: 0.101
âœ… 798 news items
   [3/7] Loading politician trades... Fetching politician trading data for NFLX...
Successfully fetched 373 politician trades for NFLX
Date range: 2014-04-03 to 2025-10-28

Transaction type breakdown:
transaction_type
purchase          194
sale              144
sale (full)        31
sale (partial)      3
exchange            1
Name: count, dtype: int64
âœ… 373 trades
   [4/7] Engineering features... Creating SMA indicators...
Creating RSI indicator...
Creating MACD indicators...
Merging sentiment data...
Merging politician trade data...
Creating advanced politician features...
ğŸ›ï¸  Creating advanced politician features...
   âœ… Net position indicators: net_trade_index, net_dollar_flow, buy_percentage
   âœ… Temporal features: 3 rolling windows + momentum
   âœ… Recency indicator: days_since_last_trade
   âœ… Quality metrics: conviction_score
   âœ… Added 23 advanced politician features
      âœ… Added 23 advanced politician features
Creating target variable...

Feature engineering complete!
Features shape: (250, 41)
Target shape: (250,)
Features: ['SMA_10', 'SMA_20', 'SMA_50', 'RSI', 'MACD', 'MACD_signal', 'MACD_diff', 'Price_change', 'Volume_change', 'HL_spread', 'SMA_10_20_cross', 'SMA_20_50_cross', 'avg_sentiment_compound', 'avg_sentiment_positive', 'avg_sentiment_negative', 'news_count', 'politician_buy_count', 'politician_trade_amount', 'buy_count', 'sell_count', 'full_sale_count', 'partial_sale_count', 'total_amount', 'buy_amount', 'sell_amount', 'net_trade_index', 'net_dollar_flow', 'buy_percentage', 'trades_last_30d', 'amount_last_30d', 'net_flow_last_30d', 'trades_last_60d', 'amount_last_60d', 'net_flow_last_60d', 'trades_last_90d', 'amount_last_90d', 'net_flow_last_90d', 'trade_momentum_30d', 'dollar_momentum_30d', 'days_since_last_trade', 'conviction_score']

Target distribution:
Target
1    129
0    121
Name: count, dtype: int64
Class balance: 51.60% positive (price increase)

Missing values before handling:
SMA_10              9
SMA_20             19
SMA_50             49
RSI                13
MACD               25
MACD_signal        33
MACD_diff          33
Price_change        1
Volume_change       1
SMA_10_20_cross    19
SMA_20_50_cross    49
news_count         50
dtype: int64
Dropped 86 rows with missing values
Missing values after handling: 0
âœ… 164 samples with 41 features
   [5/7] Preparing training data... âœ… Train: 131, Test: 33
   [6/7] Training XGBoost model... /Users/tobycoleman/mining/StockPrediction/venv/lib/python3.13/site-packages/xgboost/training.py:199: UserWarning: [15:20:16] WARNING: /Users/runner/work/xgboost/xgboost/src/learner.cc:790: 
Parameters: { "use_label_encoder" } are not used.

  bst.update(dtrain, iteration=i, fobj=obj)
âœ… Train accuracy: 100.00%
   [7/7] Evaluating on test set... âœ… Test accuracy: 57.58%

   ğŸ“Š Summary for NFLX:
      Test Accuracy: 57.58%
      Precision:     60.87%
      Recall:        73.68%
      F1 Score:      66.67%
      Overfit Gap:   +42.42%
      Runtime:       8.9s

[2/10] Testing NVDA
----------------------------------------------------------------------
   [1/7] Fetching stock data for 2019... Successfully fetched 251 days of data for NVDA
âœ… 251 trading days
   [2/7] Loading news sentiment... ğŸ“‚ Loading 3 dataset file(s) and combining...
   Loading: analyst_ratings_processed.csv... 1,400,469 rows
   Loading: raw_analyst_ratings.csv... 1,407,328 rows
   Loading: raw_partner_headlines.csv... 1,845,559 rows
âœ… Combined 3 datasets: 4,653,356 total rows
ğŸ“‹ Columns: ['Unnamed: 0', 'title', 'date', 'stock', 'headline', 'url', 'publisher']
âœ… Combined 'headline' and 'title' columns â†’ 'unified_headline'
âœ… Using columns: ticker='stock', date='date', headline='unified_headline' from 4,653,356 total rows
ğŸ¯ Found 6279 news items for NVDA
ğŸ“… After date filter: 505 items from 2019-01-01 to 2019-12-31
ğŸ¤– Calculating VADER sentiment scores...
âœ… Successfully processed 505 unique news items
ğŸ“Š Date range: 2019-01-02 09:05:00 to 2019-12-30 20:20:00
ğŸ’­ Average sentiment: 0.072
âœ… 505 news items
   [3/7] Loading politician trades... Fetching politician trading data for NVDA...
Successfully fetched 580 politician trades for NVDA
Date range: 2016-01-20 to 2025-10-10

Transaction type breakdown:
transaction_type
purchase          325
sale              227
sale (full)        16
sale (partial)      9
exchange            3
Name: count, dtype: int64
âœ… 580 trades
   [4/7] Engineering features... Creating SMA indicators...
Creating RSI indicator...
Creating MACD indicators...
Merging sentiment data...
Merging politician trade data...
Creating advanced politician features...
ğŸ›ï¸  Creating advanced politician features...
   âœ… Net position indicators: net_trade_index, net_dollar_flow, buy_percentage
   âœ… Temporal features: 3 rolling windows + momentum
   âœ… Recency indicator: days_since_last_trade
   âœ… Quality metrics: conviction_score
   âœ… Added 23 advanced politician features
      âœ… Added 23 advanced politician features
Creating target variable...

Feature engineering complete!
Features shape: (250, 41)
Target shape: (250,)
Features: ['SMA_10', 'SMA_20', 'SMA_50', 'RSI', 'MACD', 'MACD_signal', 'MACD_diff', 'Price_change', 'Volume_change', 'HL_spread', 'SMA_10_20_cross', 'SMA_20_50_cross', 'avg_sentiment_compound', 'avg_sentiment_positive', 'avg_sentiment_negative', 'news_count', 'politician_buy_count', 'politician_trade_amount', 'buy_count', 'sell_count', 'full_sale_count', 'partial_sale_count', 'total_amount', 'buy_amount', 'sell_amount', 'net_trade_index', 'net_dollar_flow', 'buy_percentage', 'trades_last_30d', 'amount_last_30d', 'net_flow_last_30d', 'trades_last_60d', 'amount_last_60d', 'net_flow_last_60d', 'trades_last_90d', 'amount_last_90d', 'net_flow_last_90d', 'trade_momentum_30d', 'dollar_momentum_30d', 'days_since_last_trade', 'conviction_score']

Target distribution:
Target
1    136
0    114
Name: count, dtype: int64
Class balance: 54.40% positive (price increase)

Missing values before handling:
SMA_10              9
SMA_20             19
SMA_50             49
RSI                13
MACD               25
MACD_signal        33
MACD_diff          33
Price_change        1
Volume_change       1
SMA_10_20_cross    19
SMA_20_50_cross    49
news_count         74
dtype: int64
Dropped 105 rows with missing values
Missing values after handling: 0
âœ… 145 samples with 41 features
   [5/7] Preparing training data... âœ… Train: 116, Test: 29
   [6/7] Training XGBoost model... /Users/tobycoleman/mining/StockPrediction/venv/lib/python3.13/site-packages/xgboost/training.py:199: UserWarning: [15:20:27] WARNING: /Users/runner/work/xgboost/xgboost/src/learner.cc:790: 
Parameters: { "use_label_encoder" } are not used.

  bst.update(dtrain, iteration=i, fobj=obj)
âœ… Train accuracy: 100.00%
   [7/7] Evaluating on test set... âœ… Test accuracy: 51.72%

   ğŸ“Š Summary for NVDA:
      Test Accuracy: 51.72%
      Precision:     43.75%
      Recall:        58.33%
      F1 Score:      50.00%
      Overfit Gap:   +48.28%
      Runtime:       8.8s

[3/10] Testing BABA
----------------------------------------------------------------------
   [1/7] Fetching stock data for 2019... Successfully fetched 251 days of data for BABA
âœ… 251 trading days
   [2/7] Loading news sentiment... ğŸ“‚ Loading 3 dataset file(s) and combining...
   Loading: analyst_ratings_processed.csv... 1,400,469 rows
   Loading: raw_analyst_ratings.csv... 1,407,328 rows
   Loading: raw_partner_headlines.csv... 1,845,559 rows
âœ… Combined 3 datasets: 4,653,356 total rows
ğŸ“‹ Columns: ['Unnamed: 0', 'title', 'date', 'stock', 'headline', 'url', 'publisher']
âœ… Combined 'headline' and 'title' columns â†’ 'unified_headline'
âœ… Using columns: ticker='stock', date='date', headline='unified_headline' from 4,653,356 total rows
ğŸ¯ Found 5683 news items for BABA
ğŸ“… After date filter: 444 items from 2019-01-01 to 2019-12-31
ğŸ¤– Calculating VADER sentiment scores...
âœ… Successfully processed 444 unique news items
ğŸ“Š Date range: 2019-01-02 14:47:00 to 2019-12-30 12:04:00
ğŸ’­ Average sentiment: 0.090
âœ… 444 news items
   [3/7] Loading politician trades... Fetching politician trading data for BABA...
Successfully fetched 238 politician trades for BABA
Date range: 2014-10-16 to 2025-10-05

Transaction type breakdown:
transaction_type
purchase          126
sale               98
sale (full)        13
sale (partial)      1
Name: count, dtype: int64
âœ… 238 trades
   [4/7] Engineering features... Creating SMA indicators...
Creating RSI indicator...
Creating MACD indicators...
Merging sentiment data...
Merging politician trade data...
Creating advanced politician features...
ğŸ›ï¸  Creating advanced politician features...
   âœ… Net position indicators: net_trade_index, net_dollar_flow, buy_percentage
   âœ… Temporal features: 3 rolling windows + momentum
   âœ… Recency indicator: days_since_last_trade
   âœ… Quality metrics: conviction_score
   âœ… Added 23 advanced politician features
      âœ… Added 23 advanced politician features
Creating target variable...

Feature engineering complete!
Features shape: (250, 41)
Target shape: (250,)
Features: ['SMA_10', 'SMA_20', 'SMA_50', 'RSI', 'MACD', 'MACD_signal', 'MACD_diff', 'Price_change', 'Volume_change', 'HL_spread', 'SMA_10_20_cross', 'SMA_20_50_cross', 'avg_sentiment_compound', 'avg_sentiment_positive', 'avg_sentiment_negative', 'news_count', 'politician_buy_count', 'politician_trade_amount', 'buy_count', 'sell_count', 'full_sale_count', 'partial_sale_count', 'total_amount', 'buy_amount', 'sell_amount', 'net_trade_index', 'net_dollar_flow', 'buy_percentage', 'trades_last_30d', 'amount_last_30d', 'net_flow_last_30d', 'trades_last_60d', 'amount_last_60d', 'net_flow_last_60d', 'trades_last_90d', 'amount_last_90d', 'net_flow_last_90d', 'trade_momentum_30d', 'dollar_momentum_30d', 'days_since_last_trade', 'conviction_score']

Target distribution:
Target
1    141
0    109
Name: count, dtype: int64
Class balance: 56.40% positive (price increase)

Missing values before handling:
SMA_10              9
SMA_20             19
SMA_50             49
RSI                13
MACD               25
MACD_signal        33
MACD_diff          33
Price_change        1
Volume_change       1
SMA_10_20_cross    19
SMA_20_50_cross    49
news_count         61
dtype: int64
Dropped 97 rows with missing values
Missing values after handling: 0
âœ… 153 samples with 41 features
   [5/7] Preparing training data... âœ… Train: 122, Test: 31
   [6/7] Training XGBoost model... /Users/tobycoleman/mining/StockPrediction/venv/lib/python3.13/site-packages/xgboost/training.py:199: UserWarning: [15:20:37] WARNING: /Users/runner/work/xgboost/xgboost/src/learner.cc:790: 
Parameters: { "use_label_encoder" } are not used.

  bst.update(dtrain, iteration=i, fobj=obj)
âœ… Train accuracy: 100.00%
   [7/7] Evaluating on test set... âœ… Test accuracy: 83.87%

   ğŸ“Š Summary for BABA:
      Test Accuracy: 83.87%
      Precision:     78.26%
      Recall:        100.00%
      F1 Score:      87.80%
      Overfit Gap:   +16.13%
      Runtime:       7.9s

[4/10] Testing QCOM
----------------------------------------------------------------------
   [1/7] Fetching stock data for 2019... Successfully fetched 251 days of data for QCOM
âœ… 251 trading days
   [2/7] Loading news sentiment... ğŸ“‚ Loading 3 dataset file(s) and combining...
   Loading: analyst_ratings_processed.csv... 1,400,469 rows
   Loading: raw_analyst_ratings.csv... 1,407,328 rows
   Loading: raw_partner_headlines.csv... 1,845,559 rows
âœ… Combined 3 datasets: 4,653,356 total rows
ğŸ“‹ Columns: ['Unnamed: 0', 'title', 'date', 'stock', 'headline', 'url', 'publisher']
âœ… Combined 'headline' and 'title' columns â†’ 'unified_headline'
âœ… Using columns: ticker='stock', date='date', headline='unified_headline' from 4,653,356 total rows
ğŸ¯ Found 5863 news items for QCOM
ğŸ“… After date filter: 430 items from 2019-01-01 to 2019-12-31
ğŸ¤– Calculating VADER sentiment scores...
âœ… Successfully processed 430 unique news items
ğŸ“Š Date range: 2019-01-02 21:44:00 to 2019-12-22 17:25:00
ğŸ’­ Average sentiment: 0.093
âœ… 430 news items
   [3/7] Loading politician trades... Fetching politician trading data for QCOM...
Successfully fetched 283 politician trades for QCOM
Date range: 2014-01-16 to 2025-10-10

Transaction type breakdown:
transaction_type
purchase          128
sale              116
sale (full)        24
sale (partial)     15
Name: count, dtype: int64
âœ… 283 trades
   [4/7] Engineering features... Creating SMA indicators...
Creating RSI indicator...
Creating MACD indicators...
Merging sentiment data...
Merging politician trade data...
Creating advanced politician features...
ğŸ›ï¸  Creating advanced politician features...
   âœ… Net position indicators: net_trade_index, net_dollar_flow, buy_percentage
   âœ… Temporal features: 3 rolling windows + momentum
   âœ… Recency indicator: days_since_last_trade
   âœ… Quality metrics: conviction_score
   âœ… Added 23 advanced politician features
      âœ… Added 23 advanced politician features
Creating target variable...

Feature engineering complete!
Features shape: (250, 41)
Target shape: (250,)
Features: ['SMA_10', 'SMA_20', 'SMA_50', 'RSI', 'MACD', 'MACD_signal', 'MACD_diff', 'Price_change', 'Volume_change', 'HL_spread', 'SMA_10_20_cross', 'SMA_20_50_cross', 'avg_sentiment_compound', 'avg_sentiment_positive', 'avg_sentiment_negative', 'news_count', 'politician_buy_count', 'politician_trade_amount', 'buy_count', 'sell_count', 'full_sale_count', 'partial_sale_count', 'total_amount', 'buy_amount', 'sell_amount', 'net_trade_index', 'net_dollar_flow', 'buy_percentage', 'trades_last_30d', 'amount_last_30d', 'net_flow_last_30d', 'trades_last_60d', 'amount_last_60d', 'net_flow_last_60d', 'trades_last_90d', 'amount_last_90d', 'net_flow_last_90d', 'trade_momentum_30d', 'dollar_momentum_30d', 'days_since_last_trade', 'conviction_score']

Target distribution:
Target
1    135
0    115
Name: count, dtype: int64
Class balance: 54.00% positive (price increase)

Missing values before handling:
SMA_10               9
SMA_20              19
SMA_50              49
RSI                 13
MACD                25
MACD_signal         33
MACD_diff           33
Price_change         1
Volume_change        1
SMA_10_20_cross     19
SMA_20_50_cross     49
news_count         100
dtype: int64
Dropped 130 rows with missing values
Missing values after handling: 0
âœ… 120 samples with 41 features
   [5/7] Preparing training data... âœ… Train: 96, Test: 24
   [6/7] Training XGBoost model... /Users/tobycoleman/mining/StockPrediction/venv/lib/python3.13/site-packages/xgboost/training.py:199: UserWarning: [15:20:47] WARNING: /Users/runner/work/xgboost/xgboost/src/learner.cc:790: 
Parameters: { "use_label_encoder" } are not used.

  bst.update(dtrain, iteration=i, fobj=obj)
âœ… Train accuracy: 100.00%
   [7/7] Evaluating on test set... âœ… Test accuracy: 66.67%

   ğŸ“Š Summary for QCOM:
      Test Accuracy: 66.67%
      Precision:     64.71%
      Recall:        84.62%
      F1 Score:      73.33%
      Overfit Gap:   +33.33%
      Runtime:       8.2s

[5/10] Testing MU
----------------------------------------------------------------------
   [1/7] Fetching stock data for 2019... Successfully fetched 251 days of data for MU
âœ… 251 trading days
   [2/7] Loading news sentiment... ğŸ“‚ Loading 3 dataset file(s) and combining...
   Loading: analyst_ratings_processed.csv... 1,400,469 rows
   Loading: raw_analyst_ratings.csv... 1,407,328 rows
   Loading: raw_partner_headlines.csv... 1,845,559 rows
âœ… Combined 3 datasets: 4,653,356 total rows
ğŸ“‹ Columns: ['Unnamed: 0', 'title', 'date', 'stock', 'headline', 'url', 'publisher']
âœ… Combined 'headline' and 'title' columns â†’ 'unified_headline'
âœ… Using columns: ticker='stock', date='date', headline='unified_headline' from 4,653,356 total rows
ğŸ¯ Found 6293 news items for MU
ğŸ“… After date filter: 536 items from 2019-01-01 to 2019-12-31
ğŸ¤– Calculating VADER sentiment scores...
âœ… Successfully processed 536 unique news items
ğŸ“Š Date range: 2019-01-02 09:08:00 to 2019-12-27 10:10:00
ğŸ’­ Average sentiment: 0.079
âœ… 536 news items
   [3/7] Loading politician trades... Fetching politician trading data for MU...
Successfully fetched 231 politician trades for MU
Date range: 2015-01-08 to 2025-10-10

Transaction type breakdown:
transaction_type
purchase          128
sale               94
sale (partial)      6
sale (full)         2
exchange            1
Name: count, dtype: int64
âœ… 231 trades
   [4/7] Engineering features... Creating SMA indicators...
Creating RSI indicator...
Creating MACD indicators...
Merging sentiment data...
Merging politician trade data...
Creating advanced politician features...
ğŸ›ï¸  Creating advanced politician features...
   âœ… Net position indicators: net_trade_index, net_dollar_flow, buy_percentage
   âœ… Temporal features: 3 rolling windows + momentum
   âœ… Recency indicator: days_since_last_trade
   âœ… Quality metrics: conviction_score
   âœ… Added 23 advanced politician features
      âœ… Added 23 advanced politician features
Creating target variable...

Feature engineering complete!
Features shape: (250, 41)
Target shape: (250,)
Features: ['SMA_10', 'SMA_20', 'SMA_50', 'RSI', 'MACD', 'MACD_signal', 'MACD_diff', 'Price_change', 'Volume_change', 'HL_spread', 'SMA_10_20_cross', 'SMA_20_50_cross', 'avg_sentiment_compound', 'avg_sentiment_positive', 'avg_sentiment_negative', 'news_count', 'politician_buy_count', 'politician_trade_amount', 'buy_count', 'sell_count', 'full_sale_count', 'partial_sale_count', 'total_amount', 'buy_amount', 'sell_amount', 'net_trade_index', 'net_dollar_flow', 'buy_percentage', 'trades_last_30d', 'amount_last_30d', 'net_flow_last_30d', 'trades_last_60d', 'amount_last_60d', 'net_flow_last_60d', 'trades_last_90d', 'amount_last_90d', 'net_flow_last_90d', 'trade_momentum_30d', 'dollar_momentum_30d', 'days_since_last_trade', 'conviction_score']

Target distribution:
Target
1    128
0    122
Name: count, dtype: int64
Class balance: 51.20% positive (price increase)

Missing values before handling:
SMA_10              9
SMA_20             19
SMA_50             49
RSI                13
MACD               25
MACD_signal        33
MACD_diff          33
Price_change        1
Volume_change       1
SMA_10_20_cross    19
SMA_20_50_cross    49
news_count         63
dtype: int64
Dropped 96 rows with missing values
Missing values after handling: 0
âœ… 154 samples with 41 features
   [5/7] Preparing training data... âœ… Train: 123, Test: 31
   [6/7] Training XGBoost model... /Users/tobycoleman/mining/StockPrediction/venv/lib/python3.13/site-packages/xgboost/training.py:199: UserWarning: [15:20:57] WARNING: /Users/runner/work/xgboost/xgboost/src/learner.cc:790: 
Parameters: { "use_label_encoder" } are not used.

  bst.update(dtrain, iteration=i, fobj=obj)
âœ… Train accuracy: 100.00%
   [7/7] Evaluating on test set... âœ… Test accuracy: 45.16%

   ğŸ“Š Summary for MU:
      Test Accuracy: 45.16%
      Precision:     60.00%
      Recall:        31.58%
      F1 Score:      41.38%
      Overfit Gap:   +54.84%
      Runtime:       8.2s

[6/10] Testing TSLA
----------------------------------------------------------------------
   [1/7] Fetching stock data for 2019... Successfully fetched 251 days of data for TSLA
âœ… 251 trading days
   [2/7] Loading news sentiment... ğŸ“‚ Loading 3 dataset file(s) and combining...
   Loading: analyst_ratings_processed.csv... 1,400,469 rows
   Loading: raw_analyst_ratings.csv... 1,407,328 rows
   Loading: raw_partner_headlines.csv... 1,845,559 rows
âœ… Combined 3 datasets: 4,653,356 total rows
ğŸ“‹ Columns: ['Unnamed: 0', 'title', 'date', 'stock', 'headline', 'url', 'publisher']
âœ… Combined 'headline' and 'title' columns â†’ 'unified_headline'
âœ… Using columns: ticker='stock', date='date', headline='unified_headline' from 4,653,356 total rows
ğŸ¯ Found 3805 news items for TSLA
ğŸ“… After date filter: 730 items from 2019-01-01 to 2019-12-31
ğŸ¤– Calculating VADER sentiment scores...
âœ… Successfully processed 730 unique news items
ğŸ“Š Date range: 2019-07-01 15:29:00 to 2019-12-30 18:57:00
ğŸ’­ Average sentiment: 0.099
âœ… 730 news items
   [3/7] Loading politician trades... Fetching politician trading data for TSLA...
Successfully fetched 321 politician trades for TSLA
Date range: 2014-02-14 to 2025-10-22

Transaction type breakdown:
transaction_type
purchase          164
sale              144
sale (full)         9
sale (partial)      4
Name: count, dtype: int64
âœ… 321 trades
   [4/7] Engineering features... Creating SMA indicators...
Creating RSI indicator...
Creating MACD indicators...
Merging sentiment data...
Merging politician trade data...
Creating advanced politician features...
ğŸ›ï¸  Creating advanced politician features...
   âœ… Net position indicators: net_trade_index, net_dollar_flow, buy_percentage
   âœ… Temporal features: 3 rolling windows + momentum
   âœ… Recency indicator: days_since_last_trade
   âœ… Quality metrics: conviction_score
   âœ… Added 23 advanced politician features
      âœ… Added 23 advanced politician features
Creating target variable...

Feature engineering complete!
Features shape: (250, 41)
Target shape: (250,)
Features: ['SMA_10', 'SMA_20', 'SMA_50', 'RSI', 'MACD', 'MACD_signal', 'MACD_diff', 'Price_change', 'Volume_change', 'HL_spread', 'SMA_10_20_cross', 'SMA_20_50_cross', 'avg_sentiment_compound', 'avg_sentiment_positive', 'avg_sentiment_negative', 'news_count', 'politician_buy_count', 'politician_trade_amount', 'buy_count', 'sell_count', 'full_sale_count', 'partial_sale_count', 'total_amount', 'buy_amount', 'sell_amount', 'net_trade_index', 'net_dollar_flow', 'buy_percentage', 'trades_last_30d', 'amount_last_30d', 'net_flow_last_30d', 'trades_last_60d', 'amount_last_60d', 'net_flow_last_60d', 'trades_last_90d', 'amount_last_90d', 'net_flow_last_90d', 'trade_momentum_30d', 'dollar_momentum_30d', 'days_since_last_trade', 'conviction_score']

Target distribution:
Target
1    131
0    119
Name: count, dtype: int64
Class balance: 52.40% positive (price increase)

Missing values before handling:
SMA_10               9
SMA_20              19
SMA_50              49
RSI                 13
MACD                25
MACD_signal         33
MACD_diff           33
Price_change         1
Volume_change        1
SMA_10_20_cross     19
SMA_20_50_cross     49
news_count         128
dtype: int64
Dropped 128 rows with missing values
Missing values after handling: 0
âœ… 122 samples with 41 features
   [5/7] Preparing training data... âœ… Train: 97, Test: 25
   [6/7] Training XGBoost model... /Users/tobycoleman/mining/StockPrediction/venv/lib/python3.13/site-packages/xgboost/training.py:199: UserWarning: [15:21:08] WARNING: /Users/runner/work/xgboost/xgboost/src/learner.cc:790: 
Parameters: { "use_label_encoder" } are not used.

  bst.update(dtrain, iteration=i, fobj=obj)
âœ… Train accuracy: 100.00%
   [7/7] Evaluating on test set... âœ… Test accuracy: 44.00%

   ğŸ“Š Summary for TSLA:
      Test Accuracy: 44.00%
      Precision:     58.33%
      Recall:        43.75%
      F1 Score:      50.00%
      Overfit Gap:   +56.00%
      Runtime:       8.4s

[7/10] Testing AAPL
----------------------------------------------------------------------
   [1/7] Fetching stock data for 2019... Successfully fetched 251 days of data for AAPL
âœ… 251 trading days
   [2/7] Loading news sentiment... ğŸ“‚ Loading 3 dataset file(s) and combining...
   Loading: analyst_ratings_processed.csv... 1,400,469 rows
   Loading: raw_analyst_ratings.csv... 1,407,328 rows
   Loading: raw_partner_headlines.csv... 1,845,559 rows
âœ… Combined 3 datasets: 4,653,356 total rows
ğŸ“‹ Columns: ['Unnamed: 0', 'title', 'date', 'stock', 'headline', 'url', 'publisher']
âœ… Combined 'headline' and 'title' columns â†’ 'unified_headline'
âœ… Using columns: ticker='stock', date='date', headline='unified_headline' from 4,653,356 total rows
ğŸ¯ Found 942 news items for AAPL
ğŸ“… After date filter: 0 items from 2019-01-01 to 2019-12-31
âš ï¸  No news in date range
âœ… 0 news items
   [3/7] Loading politician trades... Fetching politician trading data for AAPL...
Successfully fetched 1039 politician trades for AAPL
Date range: 2014-01-07 to 2025-10-24

Transaction type breakdown:
transaction_type
purchase          479
sale              435
sale (partial)     82
sale (full)        42
exchange            1
Name: count, dtype: int64
âœ… 1039 trades
   [4/7] Engineering features... Creating SMA indicators...
Creating RSI indicator...
Creating MACD indicators...
No sentiment data provided - skipping sentiment features
Merging politician trade data...
Creating advanced politician features...
ğŸ›ï¸  Creating advanced politician features...
   âœ… Net position indicators: net_trade_index, net_dollar_flow, buy_percentage
   âœ… Temporal features: 3 rolling windows + momentum
   âœ… Recency indicator: days_since_last_trade
   âœ… Quality metrics: conviction_score
   âœ… Added 23 advanced politician features
      âœ… Added 23 advanced politician features
Creating target variable...

Feature engineering complete!
Features shape: (250, 37)
Target shape: (250,)
Features: ['SMA_10', 'SMA_20', 'SMA_50', 'RSI', 'MACD', 'MACD_signal', 'MACD_diff', 'Price_change', 'Volume_change', 'HL_spread', 'SMA_10_20_cross', 'SMA_20_50_cross', 'politician_buy_count', 'politician_trade_amount', 'buy_count', 'sell_count', 'full_sale_count', 'partial_sale_count', 'total_amount', 'buy_amount', 'sell_amount', 'net_trade_index', 'net_dollar_flow', 'buy_percentage', 'trades_last_30d', 'amount_last_30d', 'net_flow_last_30d', 'trades_last_60d', 'amount_last_60d', 'net_flow_last_60d', 'trades_last_90d', 'amount_last_90d', 'net_flow_last_90d', 'trade_momentum_30d', 'dollar_momentum_30d', 'days_since_last_trade', 'conviction_score']

Target distribution:
Target
1    145
0    105
Name: count, dtype: int64
Class balance: 58.00% positive (price increase)

Missing values before handling:
SMA_10              9
SMA_20             19
SMA_50             49
RSI                13
MACD               25
MACD_signal        33
MACD_diff          33
Price_change        1
Volume_change       1
SMA_10_20_cross    19
SMA_20_50_cross    49
dtype: int64
Dropped 49 rows with missing values
Missing values after handling: 0
âœ… 201 samples with 37 features
   [5/7] Preparing training data... âœ… Train: 160, Test: 41
   [6/7] Training XGBoost model... /Users/tobycoleman/mining/StockPrediction/venv/lib/python3.13/site-packages/xgboost/training.py:199: UserWarning: [15:21:18] WARNING: /Users/runner/work/xgboost/xgboost/src/learner.cc:790: 
Parameters: { "use_label_encoder" } are not used.

  bst.update(dtrain, iteration=i, fobj=obj)
âœ… Train accuracy: 100.00%
   [7/7] Evaluating on test set... âœ… Test accuracy: 63.41%

   ğŸ“Š Summary for AAPL:
      Test Accuracy: 63.41%
      Precision:     76.19%
      Recall:        61.54%
      F1 Score:      68.09%
      Overfit Gap:   +36.59%
      Runtime:       8.3s

[8/10] Testing MSFT
----------------------------------------------------------------------
   [1/7] Fetching stock data for 2019... Successfully fetched 251 days of data for MSFT
âœ… 251 trading days
   [2/7] Loading news sentiment... ğŸ“‚ Loading 3 dataset file(s) and combining...
   Loading: analyst_ratings_processed.csv... 1,400,469 rows
   Loading: raw_analyst_ratings.csv... 1,407,328 rows
   Loading: raw_partner_headlines.csv... 1,845,559 rows
âœ… Combined 3 datasets: 4,653,356 total rows
ğŸ“‹ Columns: ['Unnamed: 0', 'title', 'date', 'stock', 'headline', 'url', 'publisher']
âœ… Combined 'headline' and 'title' columns â†’ 'unified_headline'
âœ… Using columns: ticker='stock', date='date', headline='unified_headline' from 4,653,356 total rows
ğŸ¯ Found 0 news items for MSFT
âš ï¸  No news found for ticker MSFT
âœ… 0 news items
   [3/7] Loading politician trades... Fetching politician trading data for MSFT...
Successfully fetched 1239 politician trades for MSFT
Date range: 2014-01-07 to 2025-10-28

Transaction type breakdown:
transaction_type
purchase          587
sale              561
sale (partial)     60
sale (full)        29
exchange            2
Name: count, dtype: int64
âœ… 1239 trades
   [4/7] Engineering features... Creating SMA indicators...
Creating RSI indicator...
Creating MACD indicators...
No sentiment data provided - skipping sentiment features
Merging politician trade data...
Creating advanced politician features...
ğŸ›ï¸  Creating advanced politician features...
   âœ… Net position indicators: net_trade_index, net_dollar_flow, buy_percentage
   âœ… Temporal features: 3 rolling windows + momentum
   âœ… Recency indicator: days_since_last_trade
   âœ… Quality metrics: conviction_score
   âœ… Added 23 advanced politician features
      âœ… Added 23 advanced politician features
Creating target variable...

Feature engineering complete!
Features shape: (250, 37)
Target shape: (250,)
Features: ['SMA_10', 'SMA_20', 'SMA_50', 'RSI', 'MACD', 'MACD_signal', 'MACD_diff', 'Price_change', 'Volume_change', 'HL_spread', 'SMA_10_20_cross', 'SMA_20_50_cross', 'politician_buy_count', 'politician_trade_amount', 'buy_count', 'sell_count', 'full_sale_count', 'partial_sale_count', 'total_amount', 'buy_amount', 'sell_amount', 'net_trade_index', 'net_dollar_flow', 'buy_percentage', 'trades_last_30d', 'amount_last_30d', 'net_flow_last_30d', 'trades_last_60d', 'amount_last_60d', 'net_flow_last_60d', 'trades_last_90d', 'amount_last_90d', 'net_flow_last_90d', 'trade_momentum_30d', 'dollar_momentum_30d', 'days_since_last_trade', 'conviction_score']

Target distribution:
Target
1    147
0    103
Name: count, dtype: int64
Class balance: 58.80% positive (price increase)

Missing values before handling:
SMA_10              9
SMA_20             19
SMA_50             49
RSI                13
MACD               25
MACD_signal        33
MACD_diff          33
Price_change        1
Volume_change       1
SMA_10_20_cross    19
SMA_20_50_cross    49
dtype: int64
Dropped 49 rows with missing values
Missing values after handling: 0
âœ… 201 samples with 37 features
   [5/7] Preparing training data... âœ… Train: 160, Test: 41
   [6/7] Training XGBoost model... /Users/tobycoleman/mining/StockPrediction/venv/lib/python3.13/site-packages/xgboost/training.py:199: UserWarning: [15:21:29] WARNING: /Users/runner/work/xgboost/xgboost/src/learner.cc:790: 
Parameters: { "use_label_encoder" } are not used.

  bst.update(dtrain, iteration=i, fobj=obj)
âœ… Train accuracy: 100.00%
   [7/7] Evaluating on test set... âœ… Test accuracy: 51.22%

   ğŸ“Š Summary for MSFT:
      Test Accuracy: 51.22%
      Precision:     71.43%
      Recall:        38.46%
      F1 Score:      50.00%
      Overfit Gap:   +48.78%
      Runtime:       8.5s

[9/10] Testing GOOGL
----------------------------------------------------------------------
   [1/7] Fetching stock data for 2019... Successfully fetched 251 days of data for GOOGL
âœ… 251 trading days
   [2/7] Loading news sentiment... ğŸ“‚ Loading 3 dataset file(s) and combining...
   Loading: analyst_ratings_processed.csv... 1,400,469 rows
   Loading: raw_analyst_ratings.csv... 1,407,328 rows
   Loading: raw_partner_headlines.csv... 1,845,559 rows
âœ… Combined 3 datasets: 4,653,356 total rows
ğŸ“‹ Columns: ['Unnamed: 0', 'title', 'date', 'stock', 'headline', 'url', 'publisher']
âœ… Combined 'headline' and 'title' columns â†’ 'unified_headline'
âœ… Using columns: ticker='stock', date='date', headline='unified_headline' from 4,653,356 total rows
ğŸ¯ Found 3339 news items for GOOGL
ğŸ“… After date filter: 762 items from 2019-01-01 to 2019-12-31
ğŸ¤– Calculating VADER sentiment scores...
âœ… Successfully processed 762 unique news items
ğŸ“Š Date range: 2019-01-02 21:44:00 to 2019-12-30 17:52:00
ğŸ’­ Average sentiment: 0.071
âœ… 762 news items
   [3/7] Loading politician trades... Fetching politician trading data for GOOGL...
Successfully fetched 532 politician trades for GOOGL
Date range: 2014-05-15 to 2025-10-30

Transaction type breakdown:
transaction_type
sale              286
purchase          232
sale (full)         7
exchange            4
sale (partial)      3
Name: count, dtype: int64
âœ… 532 trades
   [4/7] Engineering features... Creating SMA indicators...
Creating RSI indicator...
Creating MACD indicators...
Merging sentiment data...
Merging politician trade data...
Creating advanced politician features...
ğŸ›ï¸  Creating advanced politician features...
   âœ… Net position indicators: net_trade_index, net_dollar_flow, buy_percentage
   âœ… Temporal features: 3 rolling windows + momentum
   âœ… Recency indicator: days_since_last_trade
   âœ… Quality metrics: conviction_score
   âœ… Added 23 advanced politician features
      âœ… Added 23 advanced politician features
Creating target variable...

Feature engineering complete!
Features shape: (250, 41)
Target shape: (250,)
Features: ['SMA_10', 'SMA_20', 'SMA_50', 'RSI', 'MACD', 'MACD_signal', 'MACD_diff', 'Price_change', 'Volume_change', 'HL_spread', 'SMA_10_20_cross', 'SMA_20_50_cross', 'avg_sentiment_compound', 'avg_sentiment_positive', 'avg_sentiment_negative', 'news_count', 'politician_buy_count', 'politician_trade_amount', 'buy_count', 'sell_count', 'full_sale_count', 'partial_sale_count', 'total_amount', 'buy_amount', 'sell_amount', 'net_trade_index', 'net_dollar_flow', 'buy_percentage', 'trades_last_30d', 'amount_last_30d', 'net_flow_last_30d', 'trades_last_60d', 'amount_last_60d', 'net_flow_last_60d', 'trades_last_90d', 'amount_last_90d', 'net_flow_last_90d', 'trade_momentum_30d', 'dollar_momentum_30d', 'days_since_last_trade', 'conviction_score']

Target distribution:
Target
1    133
0    117
Name: count, dtype: int64
Class balance: 53.20% positive (price increase)

Missing values before handling:
SMA_10              9
SMA_20             19
SMA_50             49
RSI                13
MACD               25
MACD_signal        33
MACD_diff          33
Price_change        1
Volume_change       1
SMA_10_20_cross    19
SMA_20_50_cross    49
news_count         31
dtype: int64
Dropped 72 rows with missing values
Missing values after handling: 0
âœ… 178 samples with 41 features
   [5/7] Preparing training data... âœ… Train: 142, Test: 36
   [6/7] Training XGBoost model... /Users/tobycoleman/mining/StockPrediction/venv/lib/python3.13/site-packages/xgboost/training.py:199: UserWarning: [15:21:39] WARNING: /Users/runner/work/xgboost/xgboost/src/learner.cc:790: 
Parameters: { "use_label_encoder" } are not used.

  bst.update(dtrain, iteration=i, fobj=obj)
âœ… Train accuracy: 100.00%
   [7/7] Evaluating on test set... âœ… Test accuracy: 50.00%

   ğŸ“Š Summary for GOOGL:
      Test Accuracy: 50.00%
      Precision:     43.75%
      Recall:        43.75%
      F1 Score:      43.75%
      Overfit Gap:   +50.00%
      Runtime:       8.3s

[10/10] Testing AMZN
----------------------------------------------------------------------
   [1/7] Fetching stock data for 2019... Successfully fetched 251 days of data for AMZN
âœ… 251 trading days
   [2/7] Loading news sentiment... ğŸ“‚ Loading 3 dataset file(s) and combining...
   Loading: analyst_ratings_processed.csv... 1,400,469 rows
   Loading: raw_analyst_ratings.csv... 1,407,328 rows
   Loading: raw_partner_headlines.csv... 1,845,559 rows
âœ… Combined 3 datasets: 4,653,356 total rows
ğŸ“‹ Columns: ['Unnamed: 0', 'title', 'date', 'stock', 'headline', 'url', 'publisher']
âœ… Combined 'headline' and 'title' columns â†’ 'unified_headline'
âœ… Using columns: ticker='stock', date='date', headline='unified_headline' from 4,653,356 total rows
ğŸ¯ Found 608 news items for AMZN
ğŸ“… After date filter: 0 items from 2019-01-01 to 2019-12-31
âš ï¸  No news in date range
âœ… 0 news items
   [3/7] Loading politician trades... Fetching politician trading data for AMZN...
Successfully fetched 753 politician trades for AMZN
Date range: 2014-02-04 to 2025-10-28

Transaction type breakdown:
transaction_type
purchase          429
sale              295
sale (full)        18
sale (partial)      9
exchange            2
Name: count, dtype: int64
âœ… 753 trades
   [4/7] Engineering features... Creating SMA indicators...
Creating RSI indicator...
Creating MACD indicators...
No sentiment data provided - skipping sentiment features
Merging politician trade data...
Creating advanced politician features...
ğŸ›ï¸  Creating advanced politician features...
   âœ… Net position indicators: net_trade_index, net_dollar_flow, buy_percentage
   âœ… Temporal features: 3 rolling windows + momentum
   âœ… Recency indicator: days_since_last_trade
   âœ… Quality metrics: conviction_score
   âœ… Added 23 advanced politician features
      âœ… Added 23 advanced politician features
Creating target variable...

Feature engineering complete!
Features shape: (250, 37)
Target shape: (250,)
Features: ['SMA_10', 'SMA_20', 'SMA_50', 'RSI', 'MACD', 'MACD_signal', 'MACD_diff', 'Price_change', 'Volume_change', 'HL_spread', 'SMA_10_20_cross', 'SMA_20_50_cross', 'politician_buy_count', 'politician_trade_amount', 'buy_count', 'sell_count', 'full_sale_count', 'partial_sale_count', 'total_amount', 'buy_amount', 'sell_amount', 'net_trade_index', 'net_dollar_flow', 'buy_percentage', 'trades_last_30d', 'amount_last_30d', 'net_flow_last_30d', 'trades_last_60d', 'amount_last_60d', 'net_flow_last_60d', 'trades_last_90d', 'amount_last_90d', 'net_flow_last_90d', 'trade_momentum_30d', 'dollar_momentum_30d', 'days_since_last_trade', 'conviction_score']

Target distribution:
Target
1    134
0    116
Name: count, dtype: int64
Class balance: 53.60% positive (price increase)

Missing values before handling:
SMA_10              9
SMA_20             19
SMA_50             49
RSI                13
MACD               25
MACD_signal        33
MACD_diff          33
Price_change        1
Volume_change       1
SMA_10_20_cross    19
SMA_20_50_cross    49
dtype: int64
Dropped 49 rows with missing values
Missing values after handling: 0
âœ… 201 samples with 37 features
   [5/7] Preparing training data... âœ… Train: 160, Test: 41
   [6/7] Training XGBoost model... /Users/tobycoleman/mining/StockPrediction/venv/lib/python3.13/site-packages/xgboost/training.py:199: UserWarning: [15:21:49] WARNING: /Users/runner/work/xgboost/xgboost/src/learner.cc:790: 
Parameters: { "use_label_encoder" } are not used.

  bst.update(dtrain, iteration=i, fobj=obj)
âœ… Train accuracy: 100.00%
   [7/7] Evaluating on test set... âœ… Test accuracy: 48.78%

   ğŸ“Š Summary for AMZN:
      Test Accuracy: 48.78%
      Precision:     48.78%
      Recall:        100.00%
      F1 Score:      65.57%
      Overfit Gap:   +51.22%
      Runtime:       8.4s

======================================================================
[4/4] Saving results...
----------------------------------------------------------------------
âœ… Saved detailed results: Results/mvp_validation_results.csv
âœ… Saved confusion matrices: Results/mvp_confusion_matrices.csv
âœ… Saved summary statistics: Results/mvp_validation_summary.csv

======================================================================
MVP VALIDATION COMPLETE
======================================================================

ğŸ“Š SUMMARY STATISTICS (10 stocks tested)
----------------------------------------------------------------------
Mean Test Accuracy:    56.24%
Median Test Accuracy:  51.47%
Std Dev:               12.19%
Min Test Accuracy:     44.00% (TSLA)
Max Test Accuracy:     83.87% (BABA)

Mean F1 Score:         59.66%
Mean Overfit Gap:      +43.76%

ğŸ“ˆ PERFORMANCE DISTRIBUTION
----------------------------------------------------------------------
Stocks â‰¥ 70% accuracy: 1/10 (10%)
Stocks â‰¥ 65% accuracy: 2/10 (20%)
Stocks â‰¥ 60% accuracy: 3/10 (30%)

ğŸ¯ MVP TARGET ASSESSMENT
----------------------------------------------------------------------
MVP Target:            60.00%
Achieved:              56.24%
Difference:            -3.76 percentage points

âš ï¸  WARNING: Below MVP target
   Further investigation and tuning may be needed.

â±ï¸  Total Runtime: 83.9 seconds
ğŸ“… Completed: 2025-11-03 15:21:49

======================================================================
NEXT STEPS
======================================================================
1. Review results:      cat Results/mvp_validation_results.csv
2. View summary:        cat Results/mvp_validation_summary.csv
3. Analyze patterns:    Look for correlations with news coverage
4. Create visualizations: Run visualization script
5. Document findings:   Create docs/MVP_RESULTS.md
======================================================================
